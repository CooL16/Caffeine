---
version_source: plist
tag_prefix: v
release_branch: master
git_remotes:
- github.com
- origin
publishers:
- sparkle
post_publish_template: |
  array(
      APP_NAME => "Caffeine",
      APP_TITLE => _("Caffeine"),
      APP_VERSION => "{{version}}",
      APP_SIZE => "{{size}}",
      APP_IMAGES => "/images/tahoe",
      APP_TINT => "#4696c4",
      APP_TINT_HIGHLIGHT => "#3b85b0",
      APP_URL => "{{url}}",
      DOWNLOAD_URL => "/download/tahoe/",
      APP_OS => $__OS_macOS,
      APP_TARGET => "tahoe",
      APP_HIDDEN => false
  )
post_publish_commands:
- nova --wait ~/Sites/Online/caffeine-app.net/www/website/config/apps.config.php
- git -C ~/Sites/Online/caffeine-app.net add www/website/config/apps.config.php && git -C ~/Sites/Online/caffeine-app.net commit -m "Release {{version}}"
- git -C ~/Sites/Online/caffeine-app.net push origin
- transmit www.caffeine-app.net
- gh release create v{{version}} sparkle/release/{{zip_name}} --title "{{app_name}} {{version}}" --notes-file sparkle/release/{{app_name}}_{{version}}.html -R domzilla/Caffeine
- echo "Release {{version}} complete"
sparkle:
  app_name: Caffeine
  s3_bucket: dr-caffeine-mac
  aws_region: eu-central-1
  release_dir: sparkle/release
  generate_appcast: ~/bin/sparkle/generate_appcast
  signing_account: ed25519
  editor: nova --wait
